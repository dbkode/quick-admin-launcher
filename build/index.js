(()=>{"use strict";const e=window.React,t=window.wp.element,a=({quickalData:a})=>{const[n,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[i,r]=(0,t.useState)([]),[s,u]=(0,t.useState)(0),[m,d]=(0,t.useState)(!1),[k,y]=(0,t.useState)(null);return(0,t.useEffect)((()=>{document.querySelector(".quickal-admin-bar > a").addEventListener("click",(e=>{o(!n),n||setTimeout((()=>{document.getElementById("quickal-modal-input").focus()}),100),e.preventDefault()}));const e=e=>{"quickal_setting_hotkey_display"!==document.activeElement.id&&(a.hotkey.key===e.key&&a.hotkey.alt===e.altKey&&a.hotkey.ctrl===e.ctrlKey&&a.hotkey.shift===e.shiftKey&&a.hotkey.meta===e.metaKey&&(o(!n),n||setTimeout((()=>{document.getElementById("quickal-modal-input").focus()}),100),e.preventDefault()),n&&"Escape"===e.key&&(o(!1),d(!1)),n&&"ArrowDown"===e.key&&u((e=>(e+1)%i.length)),n&&"ArrowUp"===e.key&&u((e=>(e-1+i.length)%i.length)),n&&"Enter"===e.key&&i[s]&&(window.location=i[s].link))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n,i,s,a]),n?(0,e.createElement)("div",{id:"quickal-modal-wrapper",onClick:()=>{o(!1),d(!1)}},(0,e.createElement)("div",{id:"quickal-modal"},(0,e.createElement)("div",{className:"quickal-ribbon"},(0,e.createElement)("div",{className:"quickal-ribbon-content "+(m?"quickal-ribbon-content-loading":"")},(0,e.createElement)("div",{className:"quickal-ribbon-logo"}))),(0,e.createElement)("input",{id:"quickal-modal-input",type:"text",value:l,onChange:e=>{const t=e.target.value;c(t);const n=t.toLowerCase().trim();if(0===n.length)return r([]),void d(!1);const o=n.split(" "),l=a.adminMenu.filter((e=>o.every((t=>e.term.includes(t)))));if(r(l),u(0),n.length<2)return void d(!1);d(!0);const i=n.replace(" ","+");clearTimeout(k),y(setTimeout((async()=>{try{const e=await fetch(`${a.rest}/search/${i}`,{headers:{"X-WP-Nonce":a.nonce,"Content-Type":"application/json;charset=utf-8"}});if(!e.ok)return void d(!1);const t=await e.json();Array.isArray(t)&&r((e=>[...e,...t]))}catch(e){d(!1)}d(!1)}),300))},onKeyDown:e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key)return!1},placeholder:"Search any admin tool or content..."}),(0,e.createElement)("div",{className:"quickal-modal-dropdown"},i.map(((t,a)=>(0,e.createElement)("div",{key:a,className:"quickal-modal-dropdown-item "+(a===s?"quickal-selected":""),onMouseOver:()=>(e=>{u(e)})(a)},t.icon&&t.icon.includes("dashicons-")&&(0,e.createElement)("span",{className:`dashicons-before ${t.icon}`}),t.icon&&t.icon.includes("base64")&&(0,e.createElement)("span",{className:"quickal-icon-base64",style:{backgroundImage:`url(${t.icon})`}}),(0,e.createElement)("a",{href:t.link},(0,e.createElement)("span",null,t.label)),t.type&&(0,e.createElement)("div",{className:"quickal-result-type"},"(",(0,e.createElement)("span",null,t.type),")"))))))):null};document.addEventListener("DOMContentLoaded",(()=>{const n=(0,t.createRoot)(document.getElementById("quickal-modal-root")),o=window.quickalData;o.hotkey.alt=!!o.hotkey.alt,o.hotkey.ctrl=!!o.hotkey.ctrl,o.hotkey.shift=!!o.hotkey.shift,o.hotkey.meta=!!o.hotkey.meta,o.adminMenu=(()=>{const e=document.querySelectorAll("#adminmenu a");let t=[],a="",n=!1;var o="";for(let u=0;u<e.length;u+=1){var l=e[u].href,c=e[u].innerText.replace(/\n|\r/g,"").trim();if(n=e[u].className.includes("menu-top"),n){a=c;var i=e[u].querySelector(".wp-menu-image");if(i){var r=i.className.replace("dashicons-before","").match(/(dashicons-[a-z0-9-]*)/g);if(r)o=r[0];else{var s=i.querySelector("img");s&&(o=s.src)}}}else c=`${a} - ${c}`;const m={label:c,term:c.toLowerCase(),link:l,icon:o};t.push(m)}return t})(),o.extra_items.length>0&&(o.adminMenu=[...o.adminMenu,...o.extra_items]),n.render((0,e.createElement)(a,{quickalData:o}))}))})();